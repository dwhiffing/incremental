(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{230:function(e,n,t){},231:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(94),u=t.n(c),o=t(27),l=t(15),i=t(1),f=t(2),s=t(7),m={resources:[{name:"food",value:50,max:0,color:"#e6cc3b",visible:!0,effects:[{type:"resourcePerTick",payload:{name:"folks",value:.01,useMultiplier:!1}}]},{name:"wood",value:0,unlockRequirements:{wood:.01},color:"#b7612c",max:0},{name:"stone",value:0,unlockRequirements:{stone:.01},color:"#999999",max:0},{name:"folks",value:1,color:"purple",max:0,effects:[{type:"resourcePerTick",payload:{name:"food",value:-.4,integer:!0}},{type:"resourcePerTick",payload:{name:"folks",value:-.005,useMultiplier:!1}}]}],buildings:[{name:"baskets",value:1,max:10,ratio:1,prices:{wood:10},tab:"forest",effects:[{type:"+max",payload:{name:"food",value:100}},{type:"+max",payload:{name:"wood",value:10}}]},{name:"hut",value:1,prices:{wood:50},ratio:1,max:5,tab:"forest",effects:[{type:"+max",payload:{name:"folks",value:1}}]},{name:"plot",tab:"field",max:5,value:0,ratio:1,prices:{food:500,wood:100},effects:[{type:"+max",payload:{name:"farmer",value:1}}]},{name:"silo",tab:"field",max:10,value:0,ratio:1,prices:{wood:100},unlockRequirements:{plot:2},effects:[{type:"+max",payload:{name:"food",value:250}}]},{name:"box",tab:"forest",max:5,value:0,ratio:1,prices:{wood:100},unlockRequirements:{silo:1},effects:[{type:"+max",payload:{name:"wood",value:50}},{type:"+max",payload:{name:"stone",value:10}}]},{name:"mine",tab:"hill",max:5,value:0,ratio:1,prices:{wood:300},unlockRequirements:{wood:300},effects:[{type:"+max",payload:{name:"miner",value:1}}]},{name:"woodmill",tab:"forest",max:5,value:0,ratio:1,prices:{stone:10},unlockRequirements:{stone:1},effects:[{type:"+max",payload:{name:"lumberjack",value:1}}]}],commands:[],jobs:[{name:"hunter",value:0,tab:"forest",unlockRequirements:{folks:1},effects:[{type:"resourcePerTick",payload:{name:"food",value:1.2}}]},{name:"scavenger",value:0,tab:"forest",unlockRequirements:{folks:1},effects:[{type:"resourcePerTick",payload:{name:"wood",value:.03}}]},{name:"farmer",value:0,max:0,tab:"field",unlockRequirements:{plot:1},effects:[{type:"resourcePerTick",payload:{name:"food",value:2}}]},{name:"lumberjack",value:0,max:0,tab:"forest",unlockRequirements:{woodmill:1},effects:[{type:"resourcePerTick",payload:{name:"wood",value:1}}]},{name:"miner",value:0,max:0,tab:"hill",unlockRequirements:{mine:1},effects:[{type:"resourcePerTick",payload:{name:"stone",value:.1}}]}],science:[{name:"hunter+",tab:"forest",labels:["spear"],max:1,prices:{wood:1},unlockRequirements:{wood:.5},value:0,effects:[{type:"improveJob",payload:{name:"hunter",value:1.334}}]},{name:"scavenger+",labels:["rucksack","bigger rucksack"],max:2,tab:"forest",ratio:8,prices:{wood:4},unlockRequirements:{wood:2},value:0,effects:[{type:"improveJob",payload:{name:"scavenger",value:5}}]},{name:"farmer+",labels:["fertilizer","bigger rucksack"],max:2,tab:"field",ratio:8,prices:{food:1500,wood:250},unlockRequirements:{plot:3},value:0,effects:[{type:"improveJob",payload:{name:"farmer",value:1.5}}]},{name:"lumberjack+",labels:["iron axe","steel axe"],max:2,tab:"forest",ratio:8,prices:{stone:10,wood:100},unlockRequirements:{stone:1},value:0,effects:[{type:"improveJob",payload:{name:"lumberjack",value:1.5}}]}],tabs:[{name:"forest",url:""},{name:"field",url:"field",unlockRequirements:{hut:5}},{name:"hill",url:"hill",unlockRequirements:{food:1500}}]},d={resources:[],buildings:[],commands:[],jobs:[],science:[],tabs:[],unlocks:[]},p=t(5),v=t.n(p),b=function(e,n,t){return e[n].find(function(e){return e.name===t})},y=function(e,n,t){return e[n].findIndex(function(e){return e.name===t})},E=function(e,n){return b(e,"unlocks",n)},k=function(e,n){return function(e){return e.buildings.concat(e.jobs).concat(e.resources).concat(e.science.filter(function(e){return e.value>0})).map(function(e){return(e.effects||[]).map(function(n){return Object(f.a)({},n,{parent:e,multiplier:e.value})})}).flat()}(e).filter(function(e){return e.type===n})},j=function(e,n){return"number"!==typeof n.max?Number.MAX_SAFE_INTEGER:n.max+k(e,"+max").reduce(function(e,t){var a=t.payload,r=a.name,c=a.value,u=t.multiplier;return r===n.name?e+c*u:e},0)},x=function(e,n){var t={};return Object.entries(n.prices||{}).forEach(function(e){var a=Object(i.a)(e,2),r=a[0],c=a[1];t[r]=c*Math.pow(n.ratio||1.12,n.value)}),t},g=function(e,n){return 0===Object.entries(x(0,n)).filter(function(n){var t=Object(i.a)(n,2),a=t[0],r=t[1];return e.resources.find(function(e){return e.name===a}).value-r<0}).length},O=function(e,n){return h(e)[y(e,"resources",n)]},h=function(e){return e.resources.map(function(n){return Object(f.a)({},n,{max:j(e,n)})})},w=function(e){return h(e).filter(function(n){var t=n.name;return!!E(e,t)})},A=function(e,n,t){var a=k(e,n).filter(function(e){return e.payload.name===t}).reduce(function(e,n){var t=n.payload.value,a=void 0===t?0:t,r=n.multiplier;return e+a*(void 0===r?0:r)},0);return 0===a?1:a},C=function(e){var n=function(e){var n={};return k(e,"resourcePerTick").filter(function(e){return e.parent.value>0}).forEach(function(t){var a=t.parent,r=t.payload,c=r.name,u=r.value,o=r.useMultiplier,l=void 0===o||o,i=r.integer,f=void 0!==i&&i,s=t.multiplier;s*=A(e,"improveJob",a.name),f&&(s=Math.ceil(s)),l||(s=1),n[c]=n[c]||0,n[c]+=u*s*2}),n}(e);return Object.entries(n).forEach(function(t){var a=Object(i.a)(t,2),r=a[0],c=a[1],u=O(e,r);u.value+c>u.max&&(n[r]=u.max-u.value),0===u.value&&c<0&&(n[r]=0)}),n},R=function(e){return 5*Math.abs(k(e,"resourcePerTick").filter(function(e){var n=e.payload;return"food"===n.name&&n.value<0}).reduce(function(e,n){var t=n.payload.value,a=n.multiplier;return e+t*Math.ceil(a)},0))},N=t(11),S=function(e,n){var t=n.min,a=n.max;return Math.min(Math.max(e,t),a)},T=function(e,n,t){var a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).negated,r=Object(N.a)({},e,{});return Object.entries(n).forEach(function(n){var c=Object(i.a)(n,2),u=c[0],o=c[1];r[e][y(t,e,u)]=function(e){return Object(f.a)({},e,{value:S(e.value+(a?-1*o:o),{min:0,max:j(t,e)})})}}),r},I=function(e,n){var t=Object(s.a)(m[e]);return n[e].forEach(function(e,n){t[n]&&(t[n].value=e[1])}),t},q=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return T.apply(void 0,["resources"].concat(n))},P=function(e,n){var t=n.type,a=n.payload;if("LOAD"===t)return I("resources",a);if("TICK"===t){var r=C(e);return v()(q(r,e),e).resources}if("UPDATE_RESOURCES"===t)return v()(q(a,e),e).resources;if("BUY_BUILDING"===t||"BUY_SCIENCE"===t){var c=a.building||a;return v()(q(c.prices,e,{negated:!0}),e).resources}return e.resources},J=function(e,n){var t=n.type,a=n.payload;if("LOAD"===t)return I("buildings",a);if("BUY_BUILDING"===t){var r=a.building,c=a.value;return v()(function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return T.apply(void 0,["buildings"].concat(n))}(Object(N.a)({},r.name,c),e),e).buildings}return e.buildings},D=function(e,n){return e.commands},U=function(e,n){if("LOAD"===n.type)return I("science",n.payload);if("BUY_SCIENCE"===n.type){var t=n.payload.name;return v()(function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return T.apply(void 0,["science"].concat(n))}(Object(N.a)({},t,1),e),e).science}return e.science},B=function(e,n){if("LOAD"===n.type)return I("jobs",n.payload);if("UPDATE_JOBS"===n.type){var t=n.payload,a=t.name,r=t.value;return v()(function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return T.apply(void 0,["jobs"].concat(n))}(Object(N.a)({},a,r),e),e).jobs}return e.jobs},M=Object(f.a)({},d,m),F=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,a=arguments.length>1?arguments[1]:void 0,r={};return Object.entries(e).forEach(function(e){var n=Object(i.a)(e,2),c=n[0],u=n[1];r[c]=u(t,a)}),r}}({resources:P,commands:D,buildings:J,science:U,jobs:B,unlocks:function(e,n){if("SAVE"===n.type){var t=Object(f.a)({},d);t.resources=e.resources.map(function(e){return[e.name,e.value]}),t.buildings=e.buildings.map(function(e){return[e.name,e.value]}),t.science=e.science.map(function(e){return[e.name,e.value]}),t.jobs=e.jobs.map(function(e){return[e.name,e.value]}),t.unlocks=e.unlocks,window.stopSave||localStorage.setItem("save",JSON.stringify(t))}return"LOAD"===n.type?v()(Object(s.a)(n.payload.unlocks),e.unlocks):"TICK"===n.type?v()(function(e){var n=[].concat(Object(s.a)(e.resources),Object(s.a)(e.buildings),Object(s.a)(e.tabs),Object(s.a)(e.jobs),Object(s.a)(e.science),Object(s.a)(e.commands));return n.filter(function(t){return!t.unlockRequirements||!!E(e,t.name)||0===Object.entries(t.unlockRequirements).filter(function(e){var t=Object(i.a)(e,2),a=t[0],r=t[1],c=n.find(function(e){return e.name===a});return c&&c.value-r<0}).length})}(e),e.unlocks):e.unlocks},tabs:function(e){return e.tabs}},M),_=Object(a.createContext)(M),L=function(e,n){return function(t){return function(a){return r.a.createElement(_.Consumer,null,function(c){var u=c.state,o=c.dispatch;return r.a.createElement(t,Object.assign({},a,e(u,a),n(o,a,u)))})}}},Y=function(e){return function(e){return e.buildings.map(function(n){return Object(f.a)({},n,{prices:x(0,n),canAfford:g(e,n),max:j(e,n),isMaxed:j(e,n)===n.value})})}(e).filter(function(n){var t=n.name;return!!E(e,t)})},G=function(e){var n=e.name,t=e.max,a=e.value,c=e.onClick,u=e.canAfford,o=e.prices;return r.a.createElement("div",{className:"button building",onClick:c},r.a.createElement("p",{style:{color:u?"white":"red"}},n," (",a,"/",t,")"),Object.entries(o).map(function(e){var n=Object(i.a)(e,2),t=n[0],a=n[1];return r.a.createElement("p",{key:"key-".concat(t),style:{color:u?"white":"red"}},t,": ",a.toFixed(2))}))},W=L(function(e){return{buildings:Y(e)}},function(e){return{buyBuilding:function(n){return e({type:"BUY_BUILDING",payload:{building:n,value:1}})}}})(function(e){var n=e.tab,t=e.buildings,a=e.buyBuilding;return t.filter(function(e){return!n||e.tab===n}).map(function(e){return r.a.createElement(G,Object.assign({key:e.name},e,{canAfford:e.canAfford&&!e.isMaxed,onClick:function(){return e.canAfford&&a(e)}}))})}),K=function(e){return function(e){return e.commands.map(function(n){return Object(f.a)({},n,{summary:z(e,n),canAfford:V(e,n)})})}(e).filter(function(n){var t=n.name;return!!E(e,t)})},z=function(e,n){var t=e.science.filter(function(e){return e.value>0}).map(function(e){return e.effects.find(function(e){return"improveCommand"===e.type})}).filter(function(e){return!!e}).filter(function(e){return e.payload.name===n.name}).reduce(function(e,n){return e*n.payload.value},1);return n.effects.filter(function(e){return"updateResources"===e.type}).map(function(e){return Object.entries(e.payload).map(function(e){var n=Object(i.a)(e,2),a=n[0],c=n[1];if(!Array.isArray(c))return"".concat(a,": ").concat(c*t);var u=c[0]*t,o=c[c.length-1]*t;return r.a.createElement("p",null,a,": ",u," - ",o)})})},V=function(e,n){return 0===Object.entries(function(e,n){var t={};return(n.effects||[]).forEach(function(e){e.payload&&Object.entries(e.payload).forEach(function(e){var n=Object(i.a)(e,2),a=n[0],r=n[1];r<0&&(t[a]=-r)})}),t}(0,n)).filter(function(n){var t=Object(i.a)(n,2),a=t[0],r=t[1];return e.resources.find(function(e){return e.name===a}).value-r<0}).length},X=function(e){return e[Math.floor(Math.random()*e.length)]},H=function(e){var n=e.name,t=e.onClick,a=e.color,c=void 0===a?"white":a,u=e.summary,o=e.canAfford,l=void 0===o||o;return r.a.createElement("div",{onClick:l&&t,className:"button command"},r.a.createElement("p",{style:{color:l?c:"red"}},n),u)},Q=L(function(e){return{commands:K(e)}},function(e,n,t){return{triggerCommand:function(n){(function(e,n){var t=k(e,"improveCommand").find(function(e){return e.payload.name===n.name}),a=t?t.payload.value*t.multiplier:1;return n.effects.filter(function(e){return"updateResources"===e.type}).map(function(e){var n=Object(f.a)({},e.payload);return Object.entries(n).forEach(function(e){var t=Object(i.a)(e,2),r=t[0],c=t[1];n[r]=Array.isArray(c)?X(c):c,n[r]*=a}),{type:"UPDATE_RESOURCES",payload:n}})})(t,n).forEach(function(n){return e(n)})}}})(function(e){var n=e.tab,t=e.commands,a=e.triggerCommand;return r.a.createElement("div",{className:"flex flex-column"},t.filter(function(e){return e.tab===n}).map(function(e){return r.a.createElement(H,Object.assign({key:"command-".concat(e.name)},e,{onClick:function(){return a(e)}}))}))}),Z=function(e){return function(e){return e.jobs.map(function(n){return Object(f.a)({},n,{max:j(e,n),summary:ne(e,n),canAfford:ee(e)>0})})}(e).filter(function(n){var t=n.name;return!!E(e,t)})},$=function(e){var n=O(e,"folks").value;return n<1&&n>0?1:parseInt(n)},ee=function(e){return $(e)-function(e){return e.jobs.reduce(function(e,n){return e+n.value},0)}(e)},ne=function(e,n){return"".concat(n.effects.filter(function(e){return"resourcePerTick"===e.type}).map(function(t){var a=t.payload,r=A(e,"improveJob",n.name);return"".concat((5*a.value*r).toFixed(2)," ").concat(a.name," /sec")}))},te=function(e){var n=e.name,t=e.max,a=e.value,c=e.updateJobs,u=e.canAfford,o=e.summary;return r.a.createElement("div",{className:"flex justify-between align-center job",style:{opacity:a===t?.5:1}},r.a.createElement("p",{style:{color:u?"white":"red"}},n," (",a,t<1e3?"/".concat(t):"",")"),r.a.createElement("p",null,o),r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"button small",onClick:function(){return u&&c(1)},style:{marginRight:10}},r.a.createElement("span",null,"+")),r.a.createElement("div",{className:"button small",onClick:function(){return c(-1)}},r.a.createElement("span",null,"-"))))},ae=L(function(e){return{jobs:Z(e),availableWorkers:ee(e),totalWorkers:$(e),foodDrain:R(e)}},function(e){return{updateJobs:function(n){return e({type:"UPDATE_JOBS",payload:n})}}})(function(e){var n=e.jobs,t=e.tab,a=e.updateJobs,c=e.availableWorkers,u=e.totalWorkers,o=e.foodDrain;return 0!==u&&0!==n.filter(function(e){return!t||e.tab===t}).length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Available workers: ",c,"/",u),r.a.createElement("p",null,"Food drain: ",o.toFixed(2)),n.filter(function(e){return!t||e.tab===t}).map(function(e){return r.a.createElement(te,Object.assign({key:e.name},e,{updateJobs:function(n){return a({name:e.name,value:n})}}))}))}),re=function(e){return function(e){return e.science.map(function(n){return Object(f.a)({},n,{summary:ue(e,n),canAfford:ce(e,n),isPurchased:n.value>0&&1===n.max,prices:x(0,n)})})}(e).filter(function(n){var t=n.name;return!!E(e,t)}).filter(function(e){return!e.max||e.value<e.max})},ce=function(e,n){return(!n.max||n.value<n.max)&&0===Object.entries(x(0,n)).filter(function(n){var t=Object(i.a)(n,2),a=t[0],r=t[1];return e.resources.find(function(e){return e.name===a}).value-r<0}).length},ue=function(e,n){return n.effects.map(function(e){return"".concat(e.payload.name," value * ").concat(e.payload.value)}).join("")},oe=function(e){var n=e.name,t=e.value,a=e.labels,c=e.isPurchased,u=e.onClick,o=e.canAfford,l=e.summary,f=e.prices;return r.a.createElement("div",{className:"button building",onClick:u,style:{opacity:c?.5:1}},r.a.createElement("p",{style:{color:o||c?"white":"red"}},a[t]||"".concat(n).concat(t)),!c&&Object.entries(f).map(function(e){var n=Object(i.a)(e,2),t=n[0],a=n[1];return r.a.createElement("p",{key:"key-".concat(t),style:{color:o||c?"white":"red"}},t,": ",a.toFixed(2))}),r.a.createElement("p",null,l))},le=L(function(e){return{science:re(e)}},function(e){return{buyScience:function(n){var t=n.name,a=n.prices;return e({type:"BUY_SCIENCE",payload:{name:t,prices:a}})}}})(function(e){var n=e.tab,t=e.science,a=e.buyScience;return 0!==t.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Research"),t.filter(function(e){return e.tab===n}).map(function(e){return r.a.createElement(oe,Object.assign({key:e.name},e,{onClick:function(){return e.canAfford&&a(e)}}))}))}),ie=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{tab:"forest"}),r.a.createElement(W,{tab:"forest"}),r.a.createElement(ae,{tab:"forest"}),r.a.createElement(le,{tab:"forest"}))},fe=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{tab:"field"}),r.a.createElement(W,{tab:"field"}),r.a.createElement(ae,{tab:"field"}),r.a.createElement(le,{tab:"field"}))},se=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{tab:"hill"}),r.a.createElement(W,{tab:"hill"}),r.a.createElement(ae,{tab:"hill"}),r.a.createElement(le,{tab:"hill"}))},me=function(e){var n=e.name,t=e.value,a=e.max,c=e.color,u=e.perSecond;return r.a.createElement("div",{className:"flex flex-row",style:{marginTop:10}},r.a.createElement("div",null,r.a.createElement("p",{style:{color:c}},n,":")),r.a.createElement("div",{style:{marginLeft:5}},r.a.createElement("div",{className:"flex flex-row align-center"},r.a.createElement("p",null,t.toFixed(2),r.a.createElement("span",{style:{color:"#aaa"}}," /",a))),0!==u&&r.a.createElement("p",{style:{marginLeft:-5,fontSize:11}},u>0&&"+",u.toFixed(2),"/sec")))},de=L(function(e){return{resources:w(e),perTick:C(e),unlocks:e.unlocks}},function(e){return{}})(function(e){e.unlocks;var n=e.resources,t=e.perTick;return r.a.createElement("div",{className:"flex flex-column"},n.map(function(e){return r.a.createElement(me,Object.assign({key:"resource-".concat(e.name)},e,{perSecond:5*(t[e.name]||0)}))}))}),pe=function(e){return function(e){return e.tabs}(e).filter(function(n){var t=n.name;return!!E(e,t)})},ve=L(function(e){return{tabs:pe(e)}},function(e){return{}})(function(e){var n=e.tabs;return r.a.createElement("div",{className:"flex flex-column"},n.map(function(e){return r.a.createElement(o.b,{key:"link-".concat(e.name),to:"".concat(e.url)},e.name)}),r.a.createElement(o.b,{to:"",onClick:function(){window.confirm("sure?")&&(localStorage.removeItem("save"),window.stopSave=!0,document.location.reload())}},"reset"))});t(230);u.a.render(r.a.createElement(function(e){var n=e.children,t=Object(a.useReducer)(F,M),c=Object(i.a)(t,2),u=c[0],o=c[1];return Object(a.useEffect)(function(){var e=localStorage.getItem("save"),n=e?JSON.parse(e):Object(f.a)({},d);o({type:"LOAD",payload:n}),setInterval(function(){return o({type:"TICK"})},200),setInterval(function(){return o({type:"SAVE"})},200)},[]),r.a.createElement(_.Provider,{value:{state:u,dispatch:o}},n)},null,r.a.createElement(o.a,null,r.a.createElement("div",{className:"flex flex-row height-100"},r.a.createElement("div",{className:"flex flex-column",style:{flex:1,padding:10}},r.a.createElement(ve,null),r.a.createElement(de,null)),r.a.createElement("div",{style:{flex:2,padding:10}},r.a.createElement("div",null,r.a.createElement(l.a,{exact:!0,path:"/",component:ie}),r.a.createElement(l.a,{exact:!0,path:"/field",component:fe}),r.a.createElement(l.a,{exact:!0,path:"/hill",component:se})))))),document.getElementById("root"))},97:function(e,n,t){e.exports=t(231)}},[[97,1,2]]]);
//# sourceMappingURL=main.0090119a.chunk.js.map